<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Farm Assistant Chatbot</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
  <h1>ðŸŒ¾ Farmers & Rural Development Chatbot</h1>
  <nav>
    <a href="index.html">Home</a>
    <a href="chatbot.html">Chatbot</a>
    <a href="weather.html">Weather</a>
    <a href="stories.html">Stories</a>
  </nav>
</header>

<main>
  <section class="chat-container">
    <div id="chatBox" class="chat-box">
      <div class="bot-message">Hello! Iâ€™m your Farm Assistant ðŸ¤–. How can I help you today?</div>
    </div>

    <!-- Quick Suggestions -->
    <div class="quick-suggestions">
      <button class="suggestion-btn">Weather</button>
      <button class="suggestion-btn">Crops</button>
      <button class="suggestion-btn">Irrigation</button>
      <button class="suggestion-btn">Schemes</button>
      <button class="suggestion-btn">Pests/Disease</button>
    </div>

    <div class="chat-input">
      <input type="text" id="userInput" placeholder="Ask me about crops, irrigation, weather, schemes...">
      <button id="sendBtn">Send</button>
    </div>
  </section>
</main>

<footer>
  <p>Â© 2025 Farmers & Rural Development</p>
</footer>

<script src="script.js"></script>
<script>
const chatBox = document.getElementById('chatBox');
const userInput = document.getElementById('userInput');
const sendBtn = document.getElementById('sendBtn');
const suggestionBtns = document.querySelectorAll('.suggestion-btn');

// Predefined responses with optional images
const responses = [
  { keywords: ["hello","hi"], reply: "Hello! How can I assist you with farming today?" },
  { keywords: ["crop","planting","sowing"], 
    reply: "Different crops have different seasons. For example, wheat is best sown in Nov-Dec in India.", 
    image: "images/hero-farm.jpg" },
  { keywords: ["irrigation","water","watering"], 
    reply: "Water crops early morning or late evening to reduce evaporation.", 
    image: "images/irrigation.jpg" },
  { keywords: ["weather","temperature","rain"], 
    reply: "Check the current weather in the Weather section.", 
    image: "images/weather.jpg" },
  { keywords: ["scheme","government","subsidy"], 
    reply: "Check the Schemes page for government programs and subsidies.", 
    image: "images/market.jpg" },
  { keywords: ["disease","pest"], 
    reply: "Inspect crops regularly. Use proper pesticides and clean fields.", 
    image: "images/success.jpg" },
  { keywords: ["thanks","thank you"], reply: "Youâ€™re welcome! Happy farming ðŸŒ±" },
  { keywords: ["default"], reply: "Sorry, I didnâ€™t understand. Try asking about crops, irrigation, weather, or schemes." }
];

// Append message to chat
function appendMessage(sender, text, img=null){
  const div = document.createElement('div');
  div.className = sender === "user" ? "user-message" : "bot-message";
  div.innerHTML = text;
  if(img){
    const image = document.createElement('img');
    image.src = img;
    image.alt = "Illustration";
    image.style.width = "100%";
    image.style.marginTop = "10px";
    div.appendChild(image);
  }
  chatBox.appendChild(div);
  chatBox.scrollTop = chatBox.scrollHeight;
}

// Get bot reply
function getBotReply(message){
  message = message.toLowerCase();
  for(const resp of responses){
    if(resp.keywords.some(k => message.includes(k))){
      return resp;
    }
  }
  return responses.find(r => r.keywords.includes("default"));
}

// Send message
function sendMessage(message){
  if(!message) return;
  appendMessage("user", message);
  const botResp = getBotReply(message);
  setTimeout(()=> appendMessage("bot", botResp.reply, botResp.image || null), 500);
}

// Event listeners
sendBtn.addEventListener('click', () => {
  sendMessage(userInput.value.trim());
  userInput.value = '';
});
userInput.addEventListener('keypress', (e) => {
  if(e.key === 'Enter') sendBtn.click();
});

// Quick suggestion buttons
suggestionBtns.forEach(btn => {
  btn.addEventListener('click', () => sendMessage(btn.textContent));
});
</script>
</body>
</html>
